import{r as e}from"./vendor-niVxJDCj.js";import{B as r}from"./index-BuwQNYxn.js";const n=(n,t={})=>{const{onSuccess:o,onError:s,successMessage:a}=t,[l,u]=e.useState(!1),[i,c]=e.useState(null);return{loading:l,error:i,setError:c,handleSubmit:(e,t)=>{return l=void 0,i=null,d=function*(){var l,i,d,v,p,y,h;e.preventDefault();try{u(!0),c(null);const e=yield n(t);return a&&r.success(a),o&&o(e),e}catch(m){let n;throw e.preventDefault(),n=m.response?(null==(l=m.response)?void 0:l.status)>=500?"Server error. Please try again later.":400===(null==(i=m.response)?void 0:i.status)?(null==(v=null==(d=m.response)?void 0:d.data)?void 0:v.message)||"Please check your information and try again.":401===(null==(p=m.response)?void 0:p.status)?"Authentication error. Please log in again.":(null==(h=null==(y=m.response)?void 0:y.data)?void 0:h.message)||"An error occurred. Please try again.":"Network error. Please check your internet connection.",c(n),r.error(n),s&&s(m,n),m}finally{u(!1)}},new Promise(((r,n)=>{var t=r=>{try{s(d.next(r))}catch(e){n(e)}},o=r=>{try{s(d.throw(r))}catch(e){n(e)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(t,o);s((d=d.apply(l,i)).next())}));var l,i,d}}};export{n as u};
