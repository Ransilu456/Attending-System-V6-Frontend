var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,d=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t,n)=>new Promise(((r,a)=>{var o=e=>{try{s(n.next(e))}catch(t){a(t)}},d=e=>{try{s(n.throw(e))}catch(t){a(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,d);s((n=n.apply(e,t)).next())}));import{c,B as i}from"./index-BuwQNYxn.js";const l={getAllStudents:()=>s(void 0,null,(function*(){try{return yield c.get("/admin/students")}catch(e){throw e.response||i.error("Network error. Please check your connection."),e}})),registerStudent:e=>s(void 0,null,(function*(){var s,i;const l=(u=((e,t)=>{for(var n in t||(t={}))a.call(t,n)&&d(e,n,t[n]);if(r)for(var n of r(t))o.call(t,n)&&d(e,n,t[n]);return e})({},e),p={indexNumber:null==(s=e.indexNumber)?void 0:s.toUpperCase(),parent_telephone:null==(i=e.parent_telephone)?void 0:i.trim()},t(u,n(p)));var u,p;return c.post("/admin/students",l)})),updateStudent:(e,t)=>c.put(`/admin/students/${e}`,t),deleteStudent:e=>c.delete(`/admin/students/${e}`),markAttendance:e=>c.post("/admin/students/attendance",e),getScannedStudentsToday:()=>c.get("/admin/students/scanned-today"),getAttendanceReport:e=>c.get(`/admin/students/attendance-report?date=${e}`,{responseType:"arraybuffer",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),bulkImportStudents:e=>c.post("/admin/students/bulk-import",e,{headers:{"Content-Type":"multipart/form-data"}}),getStudentAttendanceHistory:(e,...t)=>s(void 0,[e,...t],(function*(e,t={}){try{const n=new URLSearchParams;t.startDate&&n.append("startDate",t.startDate),t.endDate&&n.append("endDate",t.endDate),t.limit&&n.append("limit",t.limit),t.offset&&n.append("offset",t.offset),t.sortBy&&n.append("sortBy",t.sortBy),t.sortOrder&&n.append("sortOrder",t.sortOrder);const r=n.toString(),a=`/admin/students/${e}/attendance${r?`?${r}`:""}`;return(yield c.get(a)).data}catch(n){throw i.error("Failed to fetch attendance history. Please try again."),n}})),clearAttendanceHistory:e=>s(void 0,null,(function*(){try{if(!window.confirm("Are you sure you want to clear all attendance history for this student? This action cannot be undone."))return{cancelled:!0};const t=yield c.delete(`/admin/students/${e}/attendance/clear`);return i.success("Successfully cleared attendance history"),t.data}catch(t){throw i.error("Failed to clear attendance history. Please try again."),t}})),deleteAttendanceRecord:(e,t)=>s(void 0,null,(function*(){try{if(!window.confirm("Are you sure you want to delete this attendance record? This action cannot be undone."))return{cancelled:!0};const n=yield c.delete(`/admin/students/${e}/attendance/${t}`);return i.success("Successfully deleted attendance record"),n.data}catch(n){throw i.error("Failed to delete attendance record. Please try again."),n}}))};export{l as s};
